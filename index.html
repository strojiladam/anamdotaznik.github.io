<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dotazník dítěte</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f8; color: #333; margin: 0; padding: 20px; }
  h1 { color: #0000dc; text-align: center; margin-bottom: 30px; }
  form { max-width: 900px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
  fieldset { border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 20px; background-color: #fafafa; }
  legend { font-weight: bold; color: #0000dc; font-size: 16px; padding: 0 5px; }
  label { display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: 500; align-items: center; page-break-inside: avoid; }
  input, select, textarea { padding: 6px; border-radius: 5px; border: 1px solid #ccc; font-size: 14px; flex: 1; margin-left: 10px; min-width: 50px }
  textarea.long-text { width: auto; overflow-wrap: break-word; resize: vertical}
  .hidden { display: none; }
  button { margin-top: 20px; background-color: #0000dc; color: white; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; }
  button:hover { background-color: #0000aa; }

  /* Multiple selection styling */
  .multi-select-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-left: 10px;
    margin-top: 6px;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 10px;
    background: #fff;
  }
  .multi-select-group label {
    display: flex;
    align-items: center;
    font-weight: 500;
    margin-bottom: 0;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    border: none;
    box-shadow: none;
    background: none;
    transition: none;
  }
  .multi-select-group input[type="checkbox"] {
    margin-right: 6px;
    accent-color: #0000dc;
    width: 16px;
    height: 16px;
  }

  
  .page-footer {
  width: 100%;
  text-align: center;
  font-size: 10pt;
  color: #666;
  font-family: "Times New Roman", Times, serif;
  border-top: 1px solid #ccc;
  padding: 10px 0;
  margin-top: 40px;
  position: relative;
}


@media print {
  @page { 
    size: A4; 
    margin: 20mm; 
  }

  body {
    background-color: white;
    padding: 0;
    margin: 0;
    font-size: 12pt;
    font-family: "Times New Roman", Times, serif;
    color: black;
  }

  h1 {
    font-weight: bold;
    font-size: 20pt;
    color: #0000dc;
    margin-bottom: 20px;
    font-family: "Times New Roman", Times, serif;
  }

  form {
    box-shadow: none;
    background: none;
    padding: 0;
    max-width: 100%;
    font-family: "Times New Roman", Times, serif;
  }

  fieldset {
    background: none;
    border: none !important;
    padding: 0 !important;
    margin-bottom: 25px !important;
    font-family: "Times New Roman", Times, serif;
  }

  legend {
    color: #0000dc; 
    font-size: 14pt;
    font-weight: normal;
    border-bottom: none;
    margin-left: 0 !important;
    padding: 0 !important;
    margin-bottom: 25px !important;
    text-align: left !important;
    font-family: "Times New Roman", Times, serif;
  }

  label {
    display: block !important;
    justify-content: flex-start;
    margin-bottom: 14px !important;
    page-break-inside: avoid;
    font-weight: normal;
    color: black; 
    font-family: "Times New Roman", Times, serif;
  }

  label span {
    display: block;
    margin-bottom: 4px;
    font-weight: normal;
    color: black; 
    font-family: "Times New Roman", Times, serif;
  }

  input,
  select,
  textarea {
    display: block !important;
    border: none;
    background: none;
    width: 100% !important;
    font-weight: normal;
    margin-left: 0 !important;
    color: #444; 
    font-family: "Times New Roman", Times, serif;
    font-size: 12pt;
  }

  textarea {
    resize: none;
    white-space: pre-wrap;
    overflow: visible !important;
  }

  select {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    pointer-events: none;
  }

  select::-ms-expand {
    display: none !important;
  }


  textarea::-webkit-scrollbar {
    display: none !important;
  }

   .multi-select-group {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 16px; 
    margin-left: 4px !important; 
    margin-top: 4px !important;
    border: none !important;
    padding: 0 !important;
    background: none !important;
    box-shadow: none !important;
    align-items: baseline;
  }

  .multi-select-group label {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px;
    font-weight: normal !important;
    font-size: 11pt;
    color: #444;
    padding: 0 !important;
    margin: 0 !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
    cursor: default !important;
  }


  .multi-select-group input[type="checkbox"] {
    width: 12px;
    height: 12px;
    margin: 0 4px 0 0 !important;
    accent-color: #0000dc;
    transform: translateY(1px);
  }

  .hidden,
  button {
    display: none;
  }

   .page-footer {
    display: block !important;
    position: relative;
    text-align: center;
    font-size: 10pt;
    color: #666;
    font-family: "Times New Roman", Times, serif;
    border-top: 1px solid #ccc;
    padding-top: 4mm;
    margin-top: 10mm;
    background: none;
  }

  .page-footer p {
    margin: 1px 0;
    line-height: 1.2;
  }

}


</style>
</head>
<body>

<h1>Anamnestický dotazník</h1>
<form id="questionnaire">

  <!-- Základní údaje -->
  <fieldset>
    <legend>Základní údaje</legend>
    <label><span>Jméno dítěte:</span><input class="short-text" type="text" name="child_name"></label>
    <label><span>Jak si dítě přeje být oslovováno:</span><input class="short-text" type="text" name="child_preferred_name"></label>
    <label><span>Datum narození dítěte:</span><input type="date" name="child_birthdate" id="child_birthdate"></label>
    <label><span>Věk:</span><input type="text" name="child_age" id="child_age" readonly 
    style="cursor:default; pointer-events: none;">
    </label>
  </fieldset>

  <!-- Rodinná anamnéza -->
  <fieldset>
    <legend>Rodinná anamnéza</legend>
    <label><span>Jméno matky:</span><input class="short-text" type="text" name="mother_name"></label>
    <label><span>Věk matky:</span><input type="number" name="mother_age"></label>
    <label><span>Jméno otce:</span><input class="short-text" type="text" name="father_name"></label>
    <label><span>Věk otce:</span><input type="number" name="father_age"></label>
    <label><span>Rodiče jsou:</span>
      <select name="parents_status">
        <option value="-" selected>-</option>
        <option value="Biologičtí">Biologičtí</option>
        <option value="Vychovávající">Vychovávající</option>
      </select>
    </label>
    <label><span>Biologická matka je vychovávající matka:</span>
      <select name="bio_mother_status">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Biologický otec je vychovávající otec:</span>
      <select name="bio_father_status">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Existuje další vychovávající rodič/pečovatel?</span>
      <select name="additional_carer_status">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Vychovává dítě i někdo jiný?</span>
      <select name="other_carer_status">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Kolik dalších osob dítě vychovává?</span><input type="number" name="additional_carers_count" id="additional_carers_count" min="0"></label>
    <div id="additional_carers_container"></div>

    <label><span>Má dítě sourozence?</span>
      <select name="has_siblings" id="has_siblings">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Kolik má sourozenců?</span><input type="number" name="siblings_count" id="siblings_count" min="0"></label>
    <div id="siblings_container"></div>

    <label><span>Má matka nějaká zdravotní omezení?</span>
      <select name="mother_health" id="mother_health">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <div class="hidden" id="q_mother_health_detail">
      <label><span>Pokud ano, uveďte prosím jaká omezení:</span><textarea class="long-text" name="mother_health_detail"></textarea></label>
    </div>

    <label><span>Má otec nějaká zdravotní omezení?</span>
      <select name="father_health" id="father_health">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <div class="hidden" id="q_father_health_detail">
      <label><span>Pokud ano, uveďte prosím jaká omezení:</span><textarea class="long-text" name="father_health_detail"></textarea></label>
    </div>

    <label><span>Je matka dítěte momentálně zaměstnaná?</span>
      <select name="mother_employed">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Jaká zaměstnání vykonává matka:</span><textarea class="long-text" name="mother_jobs"></textarea></label>

    <label><span>Je otec dítěte momentálně zaměstnaný?</span>
      <select name="father_employed">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Pokud ano, jaká zaměstnání vykonává otec:</span><textarea class="long-text" name="father_jobs"></textarea></label>
  </fieldset>

  <!-- Zdravotní anamnéza -->
  <fieldset>
    <legend>Zdravotní anamnéza</legend>
    <label><span>Bylo dítě někdy vyšetřeno neurologem, psychiatrem nebo klinickým psychologem?</span>
      <select name="neurolog_exam">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Jaké diagnózy stanovil:</span><textarea class="long-text" name="diagnoses"></textarea></label>

    <label><span>Trpí dítě některými chronickými onemocněními?</span><textarea class="long-text" name="chronic_illnesses"></textarea></label>
    <label><span>Prodělalo dítě v minulosti nějaké vážné zdravotní komplikace?</span><textarea class="long-text" name="past_health_issues"></textarea></label>
    <label><span>Byl dítěti někdy vyšetřen zrak?</span>
      <select name="vision_exam">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Má dítě se zrakem nějaké obtíže?</span>
      <select name="vision_issues">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Dítě:</span>
      <div class="multi-select-group">
        <label><input type="checkbox" name="vision_devices_glasses"> Nosí brýle</label>
        <label><input type="checkbox" name="vision_devices_contacts"> Nosí kontaktní čočky</label>
        <label><input type="checkbox" name="vision_devices_occluder"> Používá okluzory</label>
        <label><input type="checkbox" name="vision_devices_surgery"> Podstoupilo operaci očí</label>
      </div>
    </label>
  </fieldset>

  <!-- Sociální anamnéza -->
  <fieldset>
    <legend>Sociální anamnéza</legend>
    <label><span>V jakém typu bydlení žijete?</span>
      <select name="housing_type">
        <option value="-" selected>-</option>
        <option value="Dům">Dům</option>
        <option value="Byt">Byt</option>
        <option value="Jiné">Jiné</option>
      </select>
    </label>
    <label><span>Jak jste s bydlením spokojení?</span><textarea class="long-text" name="housing_satisfaction"></textarea></label>
    <label><span>Kolik lidí žije ve vaší domácnosti?</span><input type="number" name="household_count"></label>
    <label><span>Má dítě vlastní pokoj?</span>
      <select name="child_own_room">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
    <label><span>Má dítě vlastní pracovní stůl?</span>
      <select name="child_own_desk">
        <option value="-" selected>-</option>
        <option value="Ano">Ano</option>
        <option value="Ne">Ne</option>
      </select>
    </label>
  </fieldset>

  <button type="button" onclick="window.print()">Tisk / Uložit pdf</button>

<footer class="page-footer">
  <p>© 2025 MUNI FSS - Diagnostika dítěte</p>
  <p>Garant: Mgr. Zuzana Masopustová, PhD.</p>
  <p>Volně dostupné na webu: diagnostikaditete.cz</p>
</footer>

</form>

<script>
  // Conditional fields
  function setupConditional(selectName, detailId) {
    const select = document.querySelector(`[name="${selectName}"]`);
    const detailDiv = document.getElementById(detailId);
    detailDiv.style.display = 'none';
    select.addEventListener('change', () => {
      detailDiv.style.display = select.value === 'Ano' ? 'block' : 'none';
    });
  }
  setupConditional('mother_health', 'q_mother_health_detail');
  setupConditional('father_health', 'q_father_health_detail');

  // Age calculation
  const birthInput = document.getElementById('child_birthdate');
  const ageInput = document.getElementById('child_age');
  birthInput.addEventListener('change', () => {
    const birthDate = new Date(birthInput.value);
    if (!isNaN(birthDate)) {
      const now = new Date();
      let years = now.getFullYear() - birthDate.getFullYear();
      let months = now.getMonth() - birthDate.getMonth();
      if (months < 0) { years--; months += 12; }
      ageInput.value = `${years} let, ${months} měsíců`;
    } else {
      ageInput.value = '';
    }
  });

  // Auto-expand long textareas
  document.querySelectorAll('textarea.long-text').forEach(area => {
    area.addEventListener('input', () => {
      area.style.height = 'auto';
      area.style.height = area.scrollHeight + 'px';
    });
  });

  // Dynamic generation for additional carers
  const additionalCarersCountInput = document.getElementById('additional_carers_count');
  const additionalCarersContainer = document.getElementById('additional_carers_container');
  additionalCarersCountInput.addEventListener('input', () => {
    const count = parseInt(additionalCarersCountInput.value) || 0;
    additionalCarersContainer.innerHTML = '';
    for (let i = 1; i <= count; i++) {
      const fs = document.createElement('fieldset');
      fs.innerHTML = `
        <legend>Další vychovávající osoba ${i}</legend>
        <label><span>Jméno osoby ${i}:</span><input class="short-text" type="text" name="carer_${i}_name"></label>
        <label><span>Věk osoby ${i}:</span><input type="number" name="carer_${i}_age"></label>
        <label><span>Jaké jsou vaše vztahy s osobou ${i}:</span><textarea class="long-text" name="carer_${i}_relation"></textarea></label>
        <label><span>V jaké domácnosti osoba ${i} dítě vychovává:</span><textarea class="long-text" name="carer_${i}_household"></textarea></label>
      `;
      additionalCarersContainer.appendChild(fs);
      fs.querySelectorAll('textarea.long-text').forEach(area => {
        area.addEventListener('input', () => {
          area.style.height = 'auto';
          area.style.height = area.scrollHeight + 'px';
        });
      });
    }
  });


  // Dynamic generation for siblings
  const siblingsCountInput = document.getElementById('siblings_count');
  const siblingsContainer = document.getElementById('siblings_container');
  siblingsCountInput.addEventListener('input', () => {
    const count = parseInt(siblingsCountInput.value) || 0;
    siblingsContainer.innerHTML = '';
    for (let i = 1; i <= count; i++) {
      const fs = document.createElement('fieldset');
      fs.innerHTML = `
        <legend>Sourozenec ${i}</legend>
        <label><span>Jméno sourozence ${i}:</span><input class="short-text" type="text" name="sibling_${i}_name"></label>
        <label><span>Věk sourozence ${i}:</span><input type="number" name="sibling_${i}_age"></label>
        <label><span>Jsou dítě a sourozenec biologičtí příbuzní:</span>
          <select name="sibling_${i}_biological">
            <option value="-" selected>-</option>
            <option value="Ano">Ano</option>
            <option value="Ne">Ne</option>
          </select>
        </label>
        <label><span>Má dítě se sourozencem společné rodiče:</span>
          <select name="sibling_${i}_common_parents">
            <option value="-" selected>-</option>
            <option value="Ano">Ano</option>
            <option value="Ne">Ne</option>
          </select>
        </label>
        <label><span>Žijí ve stejné domácnosti:</span>
          <select name="sibling_${i}_same_household">
            <option value="-" selected>-</option>
            <option value="Ano">Ano</option>
            <option value="Ne">Ne</option>
          </select>
        </label>
        <label><span>Jaký mají vztah:</span><textarea class="long-text" name="sibling_${i}_relationship"></textarea></label>
        <label><span>Fyzické a psychické diagnózy:</span><textarea class="long-text" name="sibling_${i}_diagnoses"></textarea></label>
      `;
      siblingsContainer.appendChild(fs);
      fs.querySelectorAll('textarea.long-text').forEach(area => {
        area.addEventListener('input', () => {
          area.style.height = 'auto';
          area.style.height = area.scrollHeight + 'px';
        });
      });
    }
  });



</script>

</body>
</html>
