<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dotazník dítěte</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f8; color: #333; margin: 0; padding: 20px; }
  h1 { color: #0000dc; text-align: center; margin-bottom: 30px; }
  form { max-width: 900px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
  fieldset { border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 20px; background-color: #fafafa; }
  legend { font-weight: bold; color: #0000dc; font-size: 16px; padding: 0 5px; }
  label {
    display: block;
    margin-bottom: 0;
    font-weight: 500;
    page-break-inside: avoid;
  }
  input, select, textarea {
    padding: 6px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 14px;
    width: 100%;
    margin-left: 0;
    min-width: 0;
    box-sizing: border-box;
    margin-top: 6px;
    margin-bottom: 22px;
    line-height: 1.5;
    height: 38px;
    vertical-align: middle;
  }
  textarea.long-text {
    width: 100%;
    overflow-wrap: break-word;
    resize: vertical;
    box-sizing: border-box;
    margin-top: 6px;
    margin-bottom: 22px;
  }
  .hidden { display: none; }
  button { margin-top: 20px; background-color: #0000dc; color: white; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; }
  button:hover { background-color: #0000aa; }



/* Unified select-group alignment fix */
.select-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  width: 100%;
  margin-top: 6px;
  margin-bottom: 22px;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 8px;
  background: #fff;
  align-items: center;
  justify-content: flex-start;
  box-sizing: border-box;
}

.select-group label {
  display: flex;
  align-items: center;
  gap: 6px; /* spacing between input and text */
  font-weight: 500;
  margin: 0;
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease;
  user-select: none;
  min-height: 32px;
}

.select-group input[type="radio"],
.select-group input[type="checkbox"] {
  width: 18px;
  height: 18px;
  margin: 0; /* remove margin-right */
  accent-color: #0000dc;
}

.select-group label span {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 4px;
  line-height: 1.2;
  height: auto;
}

.select-group label:hover span {
  background-color: #0000dc08;
}

.select-group input[type="radio"]:checked + span,
.select-group input[type="checkbox"]:checked + span {
  background-color: #0000dc10;
  color: #0000dc;
}

.select-group input[type="radio"]:focus-visible,
.select-group input[type="checkbox"]:focus-visible {
  outline: 2px solid rgba(0, 0, 220, 0.2);
  outline-offset: 2px;
}

  .page-footer {
  width: 100%;
  text-align: center;
  font-size: 10pt;
  color: #666;
  font-family: "Times New Roman", Times, serif;
  border-top: 1px solid #ccc;
  padding: 10px 0;
  margin-top: 40px;
  position: relative;
}

@media print {
  fieldset > label,
  fieldset > input,
  fieldset > select,
  fieldset > textarea,
  fieldset > .select-group,
  fieldset > .qa-block {
    page-break-inside: avoid !important;
  }

  @page { 
    size: A4; 
    margin: 20mm; 
  }

@media print {
/* Keep dynamic fieldsets (siblings, carers) visually grouped */
#additional_carers_container fieldset,
#siblings_container fieldset {
page-break-inside: avoid !important; /* never split mid-section */
border: none !important;
margin: 0 0 10mm 5mm !important; /* small left indent for hierarchy */
padding: 0 !important;
}


#additional_carers_container legend,
#siblings_container legend {
font-size: 13pt !important;
color: #000 !important;
font-weight: bold !important;
margin-left: 0 !important;
margin-bottom: 4mm !important;
}


#additional_carers_container .qa-block,
#siblings_container .qa-block {
margin-left: 5mm !important; /* indent questions */
page-break-inside: avoid !important;
}


#additional_carers_container label,
#siblings_container label,
#additional_carers_container textarea,
#siblings_container textarea,
#additional_carers_container input,
#siblings_container input {
page-break-inside: avoid !important;
}
}

  body {
    background-color: white;
    padding: 0;
    margin: 0;
    font-size: 12pt;
    font-family: "Times New Roman", Times, serif;
    color: black;
  }

  h1 {
    font-weight: bold;
    font-size: 20pt;
    color: #0000dc;
    margin-bottom: 20px;
    font-family: "Times New Roman", Times, serif;
  }

  form {
    box-shadow: none;
    background: none;
    padding: 0;
    max-width: 100%;
    font-family: "Times New Roman", Times, serif;
  }

  fieldset {
    background: none;
    border: none !important;
    padding: 0 !important;
    margin-bottom: 25px !important;
    font-family: "Times New Roman", Times, serif;
  }

  legend {
    color: #0000dc; 
    font-size: 14pt;
    font-weight: normal;
    border-bottom: none;
    margin-left: 0 !important;
    padding: 0 !important;
    margin-bottom: 25px !important;
    text-align: left !important;
    font-family: "Times New Roman", Times, serif;
  }

  label {
    display: block !important;
    justify-content: flex-start;
    margin-bottom: 6px !important;
    page-break-inside: avoid !important;
    font-weight: normal;
    color: black; 
    font-family: "Times New Roman", Times, serif;
  }

  label span {
    display: block;
    margin-bottom: 4px;
    font-weight: normal;
    color: black; 
    font-family: "Times New Roman", Times, serif;
  }

  input,
  select,
  textarea {
    display: block !important;
    border: none;
    background: none;
    width: 100% !important;
    font-weight: normal;
    margin-left: 0 !important;
    color: #444; 
    font-family: "Times New Roman", Times, serif;
    font-size: 12pt;
    page-break-inside: avoid !important;
    margin-bottom: 22px !important;
  }

  textarea {
    resize: none;
    white-space: pre-wrap;
    overflow: visible !important;
  }

  select {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    pointer-events: none;
  }

  select::-ms-expand { display: none !important; }

  textarea::-webkit-scrollbar { display: none !important; }

  .select-group {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 16px !important;
    margin-top: 0 !important;
    margin-bottom: 22px !important;
    padding: 0 !important;
    background: none !important;
    border: none !important;
    page-break-inside: avoid !important;
  }

  .select-group label {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    font-weight: normal !important;
    font-size: 12pt !important;
    color: #000 !important;
    padding: 0 !important;
    margin: 0 !important;
    background: none !important;
    border: none !important;
    cursor: default !important;
  }

  .select-group input[type="radio"],
  .select-group input[type="checkbox"] {
    width: 14px !important;
    height: 14px !important;
    margin: 0 !important;
    accent-color: #000 !important;
  }

  .select-group label span {
    display: inline-block !important;
    line-height: 1.2 !important;
    color: #000 !important;
    font-weight: normal !important;
  }

  .select-group input[type="radio"]:checked + span,
  .select-group input[type="checkbox"]:checked + span {
    font-weight: bold !important;
  }

  .qa-block {
    display: block !important;
    page-break-inside: avoid !important;
    margin-bottom: 22px !important;
  }

  .hidden, button { display: none; }

  .page-footer {
    display: block !important;
    position: relative;
    text-align: center;
    font-size: 10pt;
    color: #666;
    font-family: "Times New Roman", Times, serif;
    border-top: 1px solid #ccc;
    padding-top: 4mm;
    margin-top: 10mm;
    background: none;
  }

  .page-footer p {
    margin: 1px 0;
    line-height: 1.2;
  }
}


</style>
</head>
<body>

<h1>Anamnestický dotazník</h1>
<form id="questionnaire">

  <!-- Základní údaje -->
  <fieldset>
  <legend>Základní údaje</legend>
  <div class="qa-block">
    <label><span>Jméno dítěte:</span></label>
    <input class="short-text" type="text" name="child_name">
  </div>
  <div class="qa-block">
    <label><span>Jak si dítě přeje být oslovováno:</span></label>
    <input class="short-text" type="text" name="child_preferred_name">
  </div>
  <div class="qa-block">
    <label><span>Datum narození dítěte:</span></label>
    <input type="date" name="child_birthdate" id="child_birthdate">
  </div>
  <div class="qa-block">
    <label><span>Věk:</span></label>
    <input type="text" name="child_age" id="child_age" readonly style="cursor:default; pointer-events: none;">
  </div>
</fieldset>

<fieldset>
  <legend>Rodinná anamnéza</legend>
  <div class="qa-block">
    <label><span>Jméno matky:</span></label>
    <input class="short-text" type="text" name="mother_name">
  </div>
  <div class="qa-block">
    <label><span>Věk matky:</span></label>
    <input type="number" name="mother_age">
  </div>
  <div class="qa-block">
    <label><span>Jméno otce:</span></label>
    <input class="short-text" type="text" name="father_name">
  </div>
  <div class="qa-block">
    <label><span>Věk otce:</span></label>
    <input type="number" name="father_age">
  </div>
  <div class="qa-block">
    <label><span>Rodiče jsou:</span></label>
    <select name="parents_status">
      <option value="-" selected>-</option>
      <option value="Biologičtí">Biologičtí</option>
      <option value="Vychovávající">Vychovávající</option>
    </select>
  </div>
  <div class="qa-block">
    <label><span>Biologická matka je vychovávající matka?</span></label>
    <div class="select-group">
      <label><input type="radio" name="bio_mother_status" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="bio_mother_status" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Biologický otec je vychovávající otec?</span></label>
    <div class="select-group">
      <label><input type="radio" name="bio_father_status" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="bio_father_status" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Existuje další vychovávající rodič/pečovatel?</span></label>
    <div class="select-group">
      <label><input type="radio" name="additional_carer_status" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="additional_carer_status" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Vychovává dítě i někdo jiný?</span></label>
    <div class="select-group">
      <label><input type="radio" name="other_carer_status" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="other_carer_status" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Kolik dalších osob dítě vychovává?</span></label>
    <input type="number" name="additional_carers_count" id="additional_carers_count" min="0">
    <div id="additional_carers_container"></div>
  </div>
  <div class="qa-block">
    <label><span>Má dítě sourozence?</span></label>
    <div class="select-group">
      <label><input type="radio" name="has_siblings" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="has_siblings" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Kolik má sourozenců?</span></label>
    <input type="number" name="siblings_count" id="siblings_count" min="0">
    <div id="siblings_container"></div>
  </div>
  <div class="qa-block">
    <label><span>Má matka nějaká zdravotní omezení?</span></label>
    <div class="select-group">
      <label><input type="radio" name="mother_health" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="mother_health" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block hidden" id="q_mother_health_detail">
    <label><span>Pokud ano, uveďte prosím jaká omezení:</span></label>
    <textarea class="long-text" name="mother_health_detail"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Má otec nějaká zdravotní omezení?</span></label>
    <div class="select-group">
      <label><input type="radio" name="father_health" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="father_health" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block hidden" id="q_father_health_detail">
    <label><span>Pokud ano, uveďte prosím jaká omezení:</span></label>
    <textarea class="long-text" name="father_health_detail"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Je matka dítěte momentálně zaměstnaná?</span></label>
    <div class="select-group">
      <label><input type="radio" name="mother_employed" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="mother_employed" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Jaká zaměstnání vykonává matka:</span></label>
    <textarea class="long-text" name="mother_jobs"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Je otec dítěte momentálně zaměstnaný?</span></label>
    <div class="select-group">
      <label><input type="radio" name="father_employed" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="father_employed" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Pokud ano, jaká zaměstnání vykonává otec:</span></label>
    <textarea class="long-text" name="father_jobs"></textarea>
  </div>
</fieldset>

<fieldset>
  <legend>Zdravotní anamnéza</legend>
  <div class="qa-block">
    <label><span>Bylo dítě někdy vyšetřeno neurologem, psychiatrem nebo klinickým psychologem?</span></label>
    <div class="select-group">
      <label><input type="radio" name="neurolog_exam" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="neurolog_exam" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Jaké diagnózy stanovil:</span></label>
    <textarea class="long-text" name="diagnoses"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Trpí dítě některými chronickými onemocněními?</span></label>
    <textarea class="long-text" name="chronic_illnesses"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Prodělalo dítě v minulosti nějaké vážné zdravotní komplikace?</span></label>
    <textarea class="long-text" name="past_health_issues"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Byl dítěti někdy vyšetřen zrak?</span></label>
    <div class="select-group">
      <label><input type="radio" name="vision_exam" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="vision_exam" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Má dítě se zrakem nějaké obtíže?</span></label>
    <div class="select-group">
      <label><input type="radio" name="vision_issues" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="vision_issues" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Dítě:</span></label>
    <div class="select-group">
      <label><input type="checkbox" name="vision_devices_glasses"><span>Nosí brýle</span></label>
      <label><input type="checkbox" name="vision_devices_contacts"><span>Nosí kontaktní čočky</span></label>
      <label><input type="checkbox" name="vision_devices_occluder"><span>Používá okluzory</span></label>
      <label><input type="checkbox" name="vision_devices_surgery"><span>Podstoupilo operaci očí</span></label>
    </div>
  </div>
</fieldset>

<fieldset>
  <legend>Sociální anamnéza</legend>
  <div class="qa-block">
    <label><span>V jakém typu bydlení žijete?</span></label>
    <select name="housing_type">
      <option value="-" selected>-</option>
      <option value="Dům">Dům</option>
      <option value="Byt">Byt</option>
      <option value="Jiné">Jiné</option>
    </select>
  </div>
  <div class="qa-block">
    <label><span>Jak jste s bydlením spokojení?</span></label>
    <textarea class="long-text" name="housing_satisfaction"></textarea>
  </div>
  <div class="qa-block">
    <label><span>Kolik lidí žije ve vaší domácnosti?</span></label>
    <input type="number" name="household_count">
  </div>
  <div class="qa-block">
    <label><span>Má dítě vlastní pokoj?</span></label>
    <div class="select-group">
      <label><input type="radio" name="child_own_room" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="child_own_room" value="Ne"><span>Ne</span></label>
    </div>
  </div>
  <div class="qa-block">
    <label><span>Má dítě vlastní pracovní stůl?</span></label>
    <div class="select-group">
      <label><input type="radio" name="child_own_desk" value="Ano"><span>Ano</span></label>
      <label><input type="radio" name="child_own_desk" value="Ne"><span>Ne</span></label>
    </div>
  </div>
</fieldset>

  <button type="button" onclick="window.print()">Tisk / Uložit pdf</button>

<footer class="page-footer">
  <p>© 2025 MUNI FSS - Diagnostika dítěte</p>
  <p>Garant: Mgr. Zuzana Masopustová, PhD.</p>
  <p>Volně dostupné na webu: diagnostikaditete.cz</p>
</footer>

</form>

<script>
  // Conditional fields
  function setupConditional(selectName, detailId) {
    const select = document.querySelector(`[name="${selectName}"]`);
    const detailDiv = document.getElementById(detailId);
    detailDiv.style.display = 'none';
    select.addEventListener('change', () => {
      detailDiv.style.display = select.value === 'Ano' ? 'block' : 'none';
    });
  }
  setupConditional('mother_health', 'q_mother_health_detail');
  setupConditional('father_health', 'q_father_health_detail');

  // Age calculation
  const birthInput = document.getElementById('child_birthdate');
  const ageInput = document.getElementById('child_age');
  birthInput.addEventListener('change', () => {
    const birthDate = new Date(birthInput.value);
    if (!isNaN(birthDate)) {
      const now = new Date();
      let years = now.getFullYear() - birthDate.getFullYear();
      let months = now.getMonth() - birthDate.getMonth();
      if (months < 0) { years--; months += 12; }
      ageInput.value = `${years} let, ${months} měsíců`;
    } else {
      ageInput.value = '';
    }
  });

  // Auto-expand long textareas
  document.querySelectorAll('textarea.long-text').forEach(area => {
    area.addEventListener('input', () => {
      area.style.height = 'auto';
      area.style.height = area.scrollHeight + 'px';
    });
  });

// Dynamic generation for additional carers
const additionalCarersCountInput = document.getElementById('additional_carers_count');
const additionalCarersContainer = document.getElementById('additional_carers_container');
additionalCarersCountInput.addEventListener('input', () => {
  const count = parseInt(additionalCarersCountInput.value) || 0;
  additionalCarersContainer.innerHTML = '';
  for (let i = 1; i <= count; i++) {
    const fs = document.createElement('fieldset');
    fs.innerHTML = `
      <legend>Další vychovávající osoba ${i}</legend>
      <label><span>Jméno osoby ${i}:</span><input class="short-text" type="text" name="carer_${i}_name"></label>
      <label><span>Věk osoby ${i}:</span><input type="number" name="carer_${i}_age"></label>
      <div class="qa-block"><label><span>Jaké jsou vaše vztahy s osobou ${i}:</span></label><textarea class="long-text" name="carer_${i}_relation"></textarea></div>
      <div class="qa-block"><label><span>V jaké domácnosti osoba ${i} dítě vychovává:</span></label><textarea class="long-text" name="carer_${i}_household"></textarea></div>
    `;
    additionalCarersContainer.appendChild(fs);
    fs.querySelectorAll('textarea.long-text').forEach(area => {
      area.addEventListener('input', () => {
        area.style.height = 'auto';
        area.style.height = area.scrollHeight + 'px';
      });
    });
  }
});

// Dynamic generation for siblings
const siblingsCountInput = document.getElementById('siblings_count');
const siblingsContainer = document.getElementById('siblings_container');
siblingsCountInput.addEventListener('input', () => {
  const count = parseInt(siblingsCountInput.value) || 0;
  siblingsContainer.innerHTML = '';
  for (let i = 1; i <= count; i++) {
    const fs = document.createElement('fieldset');
    fs.innerHTML = `
      <legend>Sourozenec ${i}</legend>
      <label><span>Jméno sourozence ${i}:</span><input class="short-text" type="text" name="sibling_${i}_name"></label>
      <label><span>Věk sourozence ${i}:</span><input type="number" name="sibling_${i}_age"></label>
      <div class="qa-block">
        <span>Jsou dítě a sourozenec biologičtí příbuzní:</span>
        <div class="select-group">
          <label><input type="radio" name="sibling_${i}_biological" value="-" checked><span>-</span></label>
          <label><input type="radio" name="sibling_${i}_biological" value="Ano"><span>Ano</span></label>
          <label><input type="radio" name="sibling_${i}_biological" value="Ne"><span>Ne</span></label>
        </div>
      </div>
      <div class="qa-block">
        <span>Má dítě se sourozencem společné rodiče:</span>
        <div class="select-group">
          <label><input type="radio" name="sibling_${i}_common_parents" value="-" checked><span>-</span></label>
          <label><input type="radio" name="sibling_${i}_common_parents" value="Ano"><span>Ano</span></label>
          <label><input type="radio" name="sibling_${i}_common_parents" value="Ne"><span>Ne</span></label>
        </div>
      </div>
      <div class="qa-block">
        <span>Žijí ve stejné domácnosti:</span>
        <div class="select-group">
          <label><input type="radio" name="sibling_${i}_same_household" value="-" checked><span>-</span></label>
          <label><input type="radio" name="sibling_${i}_same_household" value="Ano"><span>Ano</span></label>
          <label><input type="radio" name="sibling_${i}_same_household" value="Ne"><span>Ne</span></label>
        </div>
      </div>
      <div class="qa-block"><label><span>Jaký mají vztah:</span></label><textarea class="long-text" name="sibling_${i}_relationship"></textarea></div>
      <div class="qa-block"><label><span>Fyzické a psychické diagnózy:</span></label><textarea class="long-text" name="sibling_${i}_diagnoses"></textarea></div>
    `;
    siblingsContainer.appendChild(fs);
    fs.querySelectorAll('textarea.long-text').forEach(area => {
      area.addEventListener('input', () => {
        area.style.height = 'auto';
        area.style.height = area.scrollHeight + 'px';
      });
    });
  }
});



</script>

</body>
</html>
